<!DOCTYPE html>
<html>

<head>
  <script src="main.js" defer></script>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <h1>Railroad diagrams</h1>
  <p>Examples</p>
  <rr-diagram>
    <rr-terminal>MIGRATE</rr-terminal>
    <rr-nonterminal>host</rr-nonterminal>
    <rr-nonterminal>port</rr-nonterminal>
    <rr-choice>
      <rr-nonterminal>key</rr-nonterminal>
      <rr-terminal>""</rr-terminal>
    </rr-choice>
    <rr-nonterminal>destination-db</rr-nonterminal>
    <rr-nonterminal>timeout</rr-nonterminal>
    <rr-terminal optional>COPY</rr-terminal>
    <rr-terminal optional>REPLACE</rr-terminal>
    <rr-choice optional title="Authentication clause">
      <rr-sequence title="Legacy AUTH">
        <rr-terminal>AUTH</rr-terminal>
        <rr-nonterminal>password</rr-nonterminal>
      </rr-sequence>
      <rr-sequence title="Modern AUTH">
        <rr-terminal>AUTH2</rr-terminal>
        <rr-nonterminal>username</rr-nonterminal>
        <rr-nonterminal>password</rr-nonterminal>
      </rr-sequence>
    </rr-choice>
    <rr-nonterminal optional repeatable>key</rr-nonterminal>
  </rr-diagram>
  <hr />
  <rr-diagram>
    <rr-terminal>BITFIELD</rr-terminal>
    <rr-nonterminal>key</rr-nonterminal>
    <rr-sequence repeatable>
      <rr-choice>
        <rr-sequence title="Read operations">
          <rr-terminal>GET</rr-terminal>
          <rr-nonterminal>encoding</rr-nonterminal>      
          <rr-nonterminal>offset</rr-nonterminal>      
        </rr-sequence>
        <rr-sequence title="Write operations">
          <rr-sequence optional title="OVERFLOW clause">
            <rr-terminal>OVERFLOW</rr-terminal>
            <rr-choice>
              <rr-terminal>WRAP</rr-terminal>
              <rr-terminal>SAT</rr-terminal>
              <rr-terminal>FAIL</rr-terminal>
            </rr-choice>
          </rr-sequence>
          <rr-choice>
            <rr-sequence title="SET clause">
              <rr-terminal>SET</rr-terminal>
              <rr-nonterminal>encoding</rr-nonterminal>      
              <rr-nonterminal>offset</rr-nonterminal>      
              <rr-nonterminal>value</rr-nonterminal>      
            </rr-sequence>
            <rr-sequence title="INCRBY clause">
              <rr-terminal>INCRBY</rr-terminal>
              <rr-nonterminal>encoding</rr-nonterminal>      
              <rr-nonterminal>offset</rr-nonterminal>      
              <rr-nonterminal>increment</rr-nonterminal>      
            </rr-sequence>
          </rr-choice>
        </rr-sequence>
      </rr-choice>
    </rr-sequence>
  </rr-diagram>
  <hr />
  <rr-diagram>
    <rr-terminal>SET</rr-terminal>
    <rr-nonterminal>key</rr-nonterminal>
    <rr-nonterminal>value</rr-nonterminal>
    <rr-choice optional title="Existential check">
      <rr-terminal>XX</rr-terminal>
      <rr-terminal>NX</rr-terminal>      
    </rr-choice>
    <rr-terminal optional>GET</rr-terminal>
    <rr-choice optional title="Expiration clause">
      <rr-sequence>
        <rr-terminal>EX</rr-terminal>
        <rr-nonterminal>seconds</rr-nonterminal>
      </rr-sequence>
      <rr-sequence>
        <rr-terminal>PX</rr-terminal>
        <rr-nonterminal>milliseconds</rr-nonterminal>
      </rr-sequence>
      <rr-sequence>
        <rr-terminal>EXAT</rr-terminal>
        <rr-nonterminal>unix-time-seconds</rr-nonterminal>
      </rr-sequence>
      <rr-sequence>
        <rr-terminal>PXAT</rr-terminal>
        <rr-nonterminal>unix-time-milliseconds</rr-nonterminal>
      </rr-sequence>
      <rr-terminal>KEEPTTL</rr-terminal>
    </rr-choice>
  </rr-diagram>
</body>

</html>